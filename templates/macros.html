{%- macro address(monitor) -%}
  {{ monitor.protocol }}://{%- call hostname(monitor) -%}
{%- endmacro -%}

{%- macro hostname(monitor) -%}
  {%- match monitor.port -%}
    {%- when Some with (val) -%}
    {{ monitor.ip }}:{{ val }}
    {%- when None -%}
    {{ monitor.ip }}
  {%- endmatch -%}
{%- endmacro -%}
